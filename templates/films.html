<!DOCTYPE html>
<html lang="en">

<head>

    <!-- App global header -->
    {% include 'head.html' %}

    <title>Star Wars - Films</title>

</head>

<body>

    <!-- Page Content -->
    <div class="container">

        <!-- Page Heading -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Films</h1>
            </div>
        </div>
        <!-- /.row -->
        <div id="film_list"> </div>

        <script type="text/jsx">
            var film_list = JSON.parse({{films | tojson}});
            
            console.log(film_list);
            
            function GenericList(props) {
                var list = props.list;
                var listItems = list.map((ele) => <li>{ele}</li>);
                return (<ul>{listItems}</ul>);
            }

            function RefList(props) {
                var list = props.list;

                var listItems = list.map((ele) => <li><a href={"/"+props.reftype+"/"+ele.index}>{ele.description}</a></li>);
                return (<ul>{listItems}</ul>);
            }

            function Film(props){
                return (<div><div className={"row"}>
                            <div className={"col-md-7"}>
                                <a href={"#"}>
                                    <img className={"img-responsive"} src={props.film.img_url} alt={""} style={s = {width: '700px', height: '300px',}} />
                                </a>
                            </div>
                            <div className={"col-md-5"}>
                                <h2>{props.film.title}</h2>
                                <h4>Episode {props.film.episode_no}</h4>
                                <ul>
                                    <li>Director: {props.film.director}</li>
                                    <li>Producers: {props.film.producer}</li>
                                    <li>Release Date: {props.film.release_date}</li>
                                    <li>Characters:
                                        <RefList list={props.film.characters} reftype={"characters"} />
                                    </li>
                                        <li>Planets:
                                        <RefList list={props.film.planets} reftype={"planets"} />
                                    </li>
                                </ul>
                                <a className={"btn btn-primary"} href={"films/"+props.index}>View<span className={"glyphicon glyphicon-chevron-right"}></span></a>
                            </div>
                        </div>
                        <hr /></div>)
            }

            var films = [];
            for(i = 0; i < film_list.length; i++)
            {
                films.push(<Film film={film_list[i]} id={i}/>);
            }

            ReactDOM.render(<div>{films}</div>, document.getElementById("film_list"));
        </script>

        {#TODO: create common stylesheet for img style width and height#}

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>Copyright &copy; Your Website 2014</p>
                </div>
            </div>
            <!-- /.row -->
        </footer>

    </div>
    <!-- /.container -->

</body>

</html>
